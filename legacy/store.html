<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>LootMart - Store</title>
    <meta name="description" content="Get loot from your nearby marts!" />
    <link rel="icon" href="https://www.lootmart.com.pk/favicon.ico" type="image/x-icon" sizes="32x32" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @font-face {
            font-family: 'Geist';
            font-style: normal;
            font-weight: 100 900;
            font-display: swap;
            src: url('https://www.lootmart.com.pk/_next/static/media/4cf2300e9c8272f7-s.p.woff2') format('woff2');
        }

        @font-face {
            font-family: 'Geist Fallback';
            src: local('Arial');
            ascent-override: 95.94%;
            descent-override: 28.16%;
            size-adjust: 104.76%;
        }
    </style>
    <script>
        tailwind.config = { theme: { extend: { fontFamily: { sans: ['Geist', 'Geist Fallback', 'system-ui', 'sans-serif'] }, colors: { primary: { DEFAULT: '#E5A528', 50: '#FEF9EC', 600: '#C4881C' }, background: '#FAFAF8', foreground: '#1E2A3B' } } } }
    </script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box
        }

        body {
            font-family: 'Geist', 'Geist Fallback', system-ui, sans-serif;
            background: #FAFAF8;
            color: #1E2A3B;
            -webkit-font-smoothing: antialiased
        }

        .scrollbar-hide::-webkit-scrollbar {
            display: none
        }

        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none
        }

        @keyframes fadeIn {
            from {
                opacity: 0
            }

            to {
                opacity: 1
            }
        }

        @keyframes scaleIn {
            from {
                opacity: 0;
                transform: scale(.95)
            }

            to {
                opacity: 1;
                transform: scale(1)
            }
        }

        @keyframes slideUp {
            from {
                transform: translateY(100%)
            }

            to {
                transform: translateY(0)
            }
        }

        @keyframes slideInRight {
            from {
                transform: translateX(100%)
            }

            to {
                transform: translateX(0)
            }
        }

        .whatsapp-bubble {
            transition: all .3s
        }

        .whatsapp-bubble:hover {
            transform: scale(1.1)
        }

        /* Store info blocks */
        .info-block {
            padding: 10px 16px;
            border-radius: 8px;
            flex: 1;
            min-width: 180px
        }

        .info-block-dark {
            background: #1a3a5c;
            color: white
        }

        .info-block-orange {
            background: #E5A528;
            color: white
        }

        .info-block-light {
            background: #f0f0ee;
            color: #1E2A3B
        }

        /* Product card */
        .product-card {
            background: white;
            border-radius: 12px;
            border: 1px solid #f3f4f6;
            overflow: hidden;
            transition: all .2s;
            display: flex;
            flex-direction: column
        }

        .product-card:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, .08);
            border-color: #e5e7eb
        }

        .product-card .img-wrap {
            position: relative;
            padding-top: 100%;
            background: #f9fafb
        }

        .product-card .img-wrap img {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
            object-fit: contain;
            padding: 12px
        }

        .product-card .info {
            padding: 10px 12px 12px;
            flex: 1;
            display: flex;
            flex-direction: column
        }

        .product-card .pname {
            font-size: 13px;
            font-weight: 500;
            color: #1f2937;
            line-height: 1.3;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            min-height: 34px
        }

        .product-card .pweight {
            font-size: 11px;
            color: #9ca3af;
            margin-top: 2px
        }

        .product-card .price-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: auto;
            padding-top: 8px
        }

        .product-card .price {
            font-weight: 700;
            font-size: 15px;
            color: #1f2937
        }

        .product-card .old-price {
            font-size: 12px;
            color: #9ca3af;
            text-decoration: line-through;
            margin-left: 6px
        }

        .product-card .cat-label {
            font-size: 10px;
            font-weight: 600;
            padding: 2px 8px;
            border-radius: 4px;
            display: inline-block;
            margin-bottom: 4px
        }

        .add-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            width: 100%;
            padding: 8px;
            border-radius: 8px;
            background: #E5A528;
            color: white;
            border: none;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            transition: all .15s
        }

        .add-btn:hover {
            background: #C4881C
        }

        .qty-control {
            display: flex;
            align-items: center;
            border: 1px solid #E5A528;
            border-radius: 8px;
            overflow: hidden
        }

        .qty-btn {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: white;
            border: none;
            cursor: pointer;
            color: #E5A528;
            font-size: 16px;
            font-weight: 600
        }

        .qty-btn:hover {
            background: #FEF9EC
        }

        .qty-val {
            width: 32px;
            text-align: center;
            font-size: 13px;
            font-weight: 600;
            color: #E5A528;
            background: white
        }

        /* Search tag */
        .search-tag {
            padding: 6px 14px;
            border-radius: 9999px;
            font-size: 13px;
            cursor: pointer;
            border: 1px solid #e5e7eb;
            background: white;
            color: #4b5563;
            white-space: nowrap;
            transition: all .15s
        }

        .search-tag:hover {
            border-color: #E5A528;
            color: #C4881C
        }

        /* Carousel */
        .carousel-wrap {
            position: relative;
            overflow: hidden
        }

        .carousel-track {
            display: flex;
            gap: 16px;
            overflow-x: auto;
            scroll-behavior: smooth;
            padding: 0 4px
        }

        .carousel-track::-webkit-scrollbar {
            display: none
        }

        .carousel-card {
            min-width: 200px;
            max-width: 200px;
            flex-shrink: 0
        }

        .carousel-arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: white;
            border: 1px solid #e5e7eb;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 10;
            box-shadow: 0 2px 8px rgba(0, 0, 0, .1)
        }

        .carousel-arrow:hover {
            background: #f9fafb
        }

        /* Cart sidebar */
        .cart-sidebar {
            position: fixed;
            top: 0;
            right: 0;
            bottom: 0;
            width: 380px;
            max-width: 100vw;
            background: white;
            box-shadow: -4px 0 15px rgba(0, 0, 0, .1);
            z-index: 200;
            display: flex;
            flex-direction: column;
            animation: slideInRight .3s ease
        }

        .cart-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, .5);
            z-index: 199;
            animation: fadeIn .2s ease;
            backdrop-filter: blur(2px)
        }

        .cart-badge {
            position: absolute;
            top: -4px;
            right: -4px;
            background: #DC2626;
            color: white;
            font-size: 10px;
            font-weight: 700;
            min-width: 18px;
            height: 18px;
            border-radius: 9px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 4px
        }

        .mobile-cart-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: #E5A528;
            color: white;
            padding: 12px 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            z-index: 100;
            box-shadow: 0 -4px 10px rgba(0, 0, 0, .1);
            cursor: pointer
        }

        /* Login/area modals */
        .modal-overlay {
            position: fixed;
            inset: 0;
            z-index: 100;
            background: rgba(0, 0, 0, .5);
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(2px);
            animation: fadeIn .2s ease
        }

        .modal-content {
            background: white;
            border-radius: 12px;
            padding: 24px;
            max-width: 560px;
            width: calc(100% - 32px);
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, .25);
            animation: scaleIn .2s ease
        }

        .login-overlay {
            position: fixed;
            inset: 0;
            z-index: 200;
            background: rgba(0, 0, 0, .5);
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(2px);
            animation: fadeIn .2s ease
        }

        .login-modal {
            background: white;
            border-radius: 12px;
            max-width: 420px;
            width: calc(100% - 32px);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, .25);
            animation: scaleIn .2s ease;
            overflow: hidden
        }

        .area-card {
            transition: all .15s;
            cursor: pointer;
            border: 1px solid #e5e7eb;
            border-radius: 10px;
            padding: 14px 16px
        }

        .area-card:hover {
            border-color: #E5A528;
            background: #FEF9EC
        }

        .sheet-overlay {
            position: fixed;
            inset: 0;
            z-index: 150;
            background: rgba(0, 0, 0, .5);
            backdrop-filter: blur(2px);
            animation: fadeIn .2s ease
        }

        .sheet-content {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            border-radius: 16px 16px 0 0;
            padding: 24px;
            max-height: 80vh;
            overflow-y: auto;
            animation: slideUp .3s ease;
            z-index: 151
        }

        .select-trigger {
            display: flex;
            align-items: center;
            gap: 8px;
            border-radius: 6px;
            border: 1px solid transparent;
            padding: 6px 12px;
            font-size: 14px;
            background: transparent;
            cursor: pointer;
            transition: background .15s
        }

        .select-trigger:hover {
            background: #f3f4f6
        }

        @media(max-width:767px) {
            .cart-sidebar {
                width: 100%
            }
        }
    </style>
</head>

<body class="__variable_188709 __variable_9a8899 antialiased">

    <!-- HEADER -->
    <div class="w-full border-b border-gray-100 bg-white sticky top-0 z-40">
        <div class="flex md:justify-between justify-center items-center w-full px-4 py-3 min-w-0 relative">
            <a class="shrink-0" href="index.html">
                <img alt="LootMart" width="150" height="73" class="h-9 w-auto md:h-11" style="color:transparent"
                    src="https://www.lootmart.com.pk/_next/image?url=%2Flogo-header-300x147.png&w=384&q=75" />
            </a>
            <!-- Center: Now viewing store -->
            <div class="hidden md:flex flex-1 justify-center min-w-0 mx-4">
                <div class="flex items-center gap-2 text-sm">
                    <span class="text-gray-500">Now viewing</span>
                    <span
                        class="inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full font-semibold text-white text-xs"
                        style="background:#1a3a5c;">
                        <i data-lucide="store" class="w-3.5 h-3.5"></i>
                        <span id="headerStoreName">Royal Cash & Carry</span>
                    </span>
                    <span
                        class="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700"
                        id="headerSameDay">Same day</span>
                </div>
            </div>
            <!-- Right: location + user -->
            <div class="hidden md:flex shrink-0 items-center gap-3">
                <div class="flex flex-col items-end text-right">
                    <span class="text-[10px] text-gray-400 uppercase tracking-wider">Deliver to</span>
                    <span class="text-sm font-medium text-gray-900" id="selectedAreaDesktop">Sector H-12</span>
                </div>
                <div class="w-px h-8 bg-gray-200"></div>
                <button class="flex items-center gap-2 px-2 py-1 rounded-md hover:bg-gray-100 transition-colors"
                    onclick="showLoginModal()">
                    <div class="h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center"><span
                            class="text-xs font-medium text-gray-500">GU</span></div>
                    <span class="text-sm text-gray-700">Guest</span>
                    <i data-lucide="chevron-down" class="w-3 h-3 text-gray-400"></i>
                </button>
            </div>
            <!-- Mobile right -->
            <div class="md:hidden absolute right-4 top-1/2 -translate-y-1/2 flex items-center gap-2">
                <button class="relative p-1.5" onclick="toggleCart()"><i data-lucide="shopping-bag"
                        class="w-5 h-5 text-gray-700"></i><span class="cart-badge hidden"
                        id="cartBadgeMobile">0</span></button>
                <button class="flex items-center" onclick="showLoginModal()">
                    <div class="h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center"><span
                            class="text-xs font-medium text-gray-500">GU</span></div>
                </button>
            </div>
        </div>
    </div>

    <!-- MAIN CONTENT (scrollable) -->
    <main class="overflow-auto" style="height:calc(100vh - 65px)">

        <!-- Store Info Blocks -->
        <div class="max-w-6xl mx-auto px-4 pt-4 pb-2">
            <div class="flex gap-3 overflow-x-auto scrollbar-hide pb-2">
                <div class="info-block info-block-dark">
                    <div class="text-[10px] uppercase tracking-wider opacity-70">Store Hours</div>
                    <div class="flex items-center gap-1.5 mt-1 text-sm font-semibold"><i data-lucide="clock"
                            class="w-3.5 h-3.5"></i><span id="storeHours">All day</span></div>
                </div>
                <div class="info-block info-block-orange">
                    <div class="text-[10px] uppercase tracking-wider opacity-80">Delivery Hours</div>
                    <div class="flex items-center gap-1.5 mt-1 text-sm font-semibold"><i data-lucide="clock"
                            class="w-3.5 h-3.5"></i><span id="deliveryHours">All day</span></div>
                </div>
                <div class="info-block info-block-light">
                    <div class="text-[10px] uppercase tracking-wider text-gray-500">Delivery Fee</div>
                    <div class="flex items-center gap-1.5 mt-1 text-sm font-semibold"><span
                            class="text-gray-600">$</span><span id="deliveryFeeInfo">Rs. 100</span></div>
                </div>
                <div class="info-block info-block-light">
                    <div class="text-[10px] uppercase tracking-wider text-gray-500">Free Delivery</div>
                    <div class="flex items-center gap-1.5 mt-1 text-sm font-semibold"><i data-lucide="shopping-cart"
                            class="w-3.5 h-3.5 text-gray-600"></i><span id="freeDeliveryInfo">Rs. 1000+</span></div>
                </div>
            </div>
        </div>

        <!-- Welcome to Store -->
        <div class="max-w-6xl mx-auto px-4 py-6">
            <div class="flex items-center gap-3 mb-2">
                <i data-lucide="store" class="w-6 h-6" style="color:#E5A528"></i>
                <h1 class="text-xl md:text-2xl font-bold text-gray-900">Welcome to <span id="welcomeStoreName">Royal
                        Cash &
                        Carry</span></h1>
            </div>
            <div class="flex items-center justify-end mb-4">
                <button
                    class="inline-flex items-center gap-1.5 text-xs px-3 py-1.5 rounded-full bg-green-100 text-green-700 font-medium"
                    id="availableBtn"><span class="w-2 h-2 rounded-full bg-green-500"></span> Available</button>
            </div>
        </div>

        <!-- Featured Products Carousel -->
        <div class="max-w-6xl mx-auto px-4 mb-8">
            <div class="flex items-center justify-between mb-4">
                <h2 class="text-lg font-bold text-gray-900">Featured Products</h2>
                <button class="text-sm font-medium" style="color:#E5A528">Popular Picks</button>
            </div>
            <div class="carousel-wrap">
                <button class="carousel-arrow" style="left:4px" onclick="scrollCarousel(-1)"><i
                        data-lucide="chevron-left" class="w-4 h-4"></i></button>
                <div class="carousel-track" id="featuredTrack"></div>
                <button class="carousel-arrow" style="right:4px" onclick="scrollCarousel(1)"><i
                        data-lucide="chevron-right" class="w-4 h-4"></i></button>
            </div>
        </div>

        <!-- Search Section -->
        <div class="max-w-6xl mx-auto px-4 mb-6">
            <h2 class="text-lg font-bold text-gray-900 mb-3">Find products quickly in <span id="searchStoreName">Royal
                    Cash &
                    Carry</span></h2>
            <div
                class="flex items-center gap-3 bg-white border border-gray-200 rounded-xl px-4 py-3 mb-4 focus-within:border-primary focus-within:ring-2 focus-within:ring-primary/10 transition-all">
                <i data-lucide="search" class="w-5 h-5 text-gray-400 flex-shrink-0"></i>
                <input type="text" class="flex-1 border-none outline-none bg-transparent text-sm"
                    placeholder="Search products in Royal Cash &amp; Carry..." id="searchInput"
                    oninput="handleSearch(this.value)" />
            </div>
            <div class="flex items-center gap-2 flex-wrap">
                <span class="text-xs text-gray-500">Popular searches:</span>
                <button class="search-tag" onclick="handleSearch('Bread')">Bread</button>
                <button class="search-tag" onclick="handleSearch('Eggs')">Eggs</button>
                <button class="search-tag" onclick="handleSearch('Milk')">Milk</button>
                <button class="search-tag" onclick="handleSearch('Tea')">Tea</button>
                <button class="search-tag" onclick="handleSearch('Cookies')">Cookies</button>
                <button class="search-tag" onclick="handleSearch('Chocolate')">Chocolate</button>
                <button class="search-tag" onclick="handleSearch('Cooking Oil')">Cooking Oil</button>
                <button class="search-tag" onclick="handleSearch('Chicken')">Chicken</button>
            </div>
        </div>

        <!-- Popular Products -->
        <div class="max-w-6xl mx-auto px-4 pb-24">
            <div class="flex items-center justify-between mb-4">
                <div class="flex items-center gap-3">
                    <h2 class="text-lg font-bold text-gray-900" id="productSectionTitle">Popular Products</h2>
                    <div class="flex gap-1">
                        <button class="p-1.5 rounded bg-gray-100 hover:bg-gray-200" onclick="setGridView('grid')"><i
                                data-lucide="grid-2x2" class="w-4 h-4 text-gray-600"></i></button>
                        <button class="p-1.5 rounded hover:bg-gray-200" onclick="setGridView('list')"><i
                                data-lucide="list" class="w-4 h-4 text-gray-600"></i></button>
                    </div>
                </div>
                <label class="flex items-center gap-2 text-sm text-gray-600 cursor-pointer">
                    <span>In stock only</span>
                    <input type="checkbox" checked class="rounded" />
                </label>
            </div>
            <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3" id="productsGrid"></div>
            <div class="hidden text-center py-16" id="emptyState">
                <i data-lucide="search-x" class="w-16 h-16 mx-auto text-gray-300 mb-4"></i>
                <p class="text-gray-500 font-medium">No products found</p>
            </div>
        </div>
    </main>

    <!-- Cart Sidebar -->
    <div class="hidden" id="cartWrapper">
        <div class="cart-overlay" onclick="toggleCart()"></div>
        <div class="cart-sidebar">
            <div class="flex items-center justify-between p-4 border-b border-gray-100">
                <div class="flex items-center gap-2"><i data-lucide="shopping-bag" class="w-5 h-5 text-gray-700"></i>
                    <h3 class="font-semibold text-gray-900">Your Cart</h3><span class="text-sm text-gray-500"
                        id="cartItemCount">(0 items)</span>
                </div>
                <button onclick="toggleCart()" class="p-1 rounded-md hover:bg-gray-100"><i data-lucide="x"
                        class="w-5 h-5 text-gray-400"></i></button>
            </div>
            <div class="flex-1 overflow-y-auto p-4" id="cartItems">
                <div id="cartItemsList"></div>
                <div class="text-center py-12" id="emptyCartView"><i data-lucide="shopping-bag"
                        class="w-16 h-16 mx-auto text-gray-200 mb-4"></i>
                    <p class="text-gray-500 font-medium">Your cart is empty</p>
                </div>
            </div>
            <div class="border-t border-gray-100 p-4" id="cartFooter">
                <div class="space-y-2 mb-4">
                    <div class="flex justify-between text-sm"><span class="text-gray-500">Subtotal</span><span
                            class="font-medium" id="cartSubtotal">Rs. 0</span></div>
                    <div class="flex justify-between text-sm"><span class="text-gray-500">Delivery</span><span
                            class="font-medium" id="cartDelivery">Rs. 0</span></div>
                    <div class="flex justify-between text-base font-semibold pt-2 border-t border-gray-100">
                        <span>Total</span><span id="cartTotal">Rs. 0</span>
                    </div>
                </div>
                <button
                    class="w-full py-3 rounded-lg font-semibold text-sm text-white bg-primary hover:bg-primary-600 transition-colors"
                    onclick="showLoginModal();toggleCart()">Login to Checkout</button>
            </div>
        </div>
    </div>

    <!-- Mobile Bottom Cart Bar -->
    <div class="md:hidden hidden" id="mobileCartBar" onclick="toggleCart()">
        <div class="mobile-cart-bar">
            <div class="flex items-center gap-3"><i data-lucide="shopping-bag" class="w-5 h-5"></i><span
                    class="text-sm font-semibold" id="mobileCartCount">0 items</span></div>
            <div class="flex items-center gap-2"><span class="font-bold" id="mobileCartTotal">Rs. 0</span><i
                    data-lucide="chevron-right" class="w-4 h-4"></i></div>
        </div>
    </div>

    <!-- Login Modal -->
    <div class="login-overlay hidden" id="loginModal">
        <div class="login-modal">
            <div class="p-6">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-lg font-semibold text-gray-900">Login to your account</h2><button
                        onclick="closeLoginModal()" class="p-1 rounded-md hover:bg-gray-100"><i data-lucide="x"
                            class="w-5 h-5 text-gray-400"></i></button>
                </div>
                <button
                    class="w-full flex items-center justify-center gap-3 px-4 py-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors mb-4">
                    <svg width="20" height="20" viewBox="0 0 24 24">
                        <path
                            d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92a5.06 5.06 0 0 1-2.2 3.32v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.1z"
                            fill="#4285F4" />
                        <path
                            d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"
                            fill="#34A853" />
                        <path
                            d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"
                            fill="#FBBC05" />
                        <path
                            d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"
                            fill="#EA4335" />
                    </svg>
                    <span class="text-sm font-medium text-gray-700">Login with Google</span>
                </button>
            </div>
            <div class="bg-gradient-to-br from-amber-50 to-amber-100 p-6 flex items-center justify-center">
                <div class="text-center"><img
                        src="https://www.lootmart.com.pk/_next/image?url=%2Flogo-header-300x147.png&w=384&q=75"
                        alt="LootMart" class="h-10 mx-auto mb-1 opacity-60" />
                    <p class="text-xs text-amber-700 opacity-60">Get loot from your nearby marts!</p>
                </div>
            </div>
        </div>
    </div>

    <!-- WhatsApp -->
    <div class="fixed right-6 z-50 whatsapp-bubble" style="bottom:24px">
        <button
            class="inline-flex items-center justify-center h-14 w-14 rounded-full shadow-lg text-white bg-green-500 hover:bg-green-600 transition-all duration-300 hover:scale-110 p-0"
            aria-label="Chat">
            <span class="flex h-full w-full items-center justify-center"><svg viewBox="0 0 24 24" fill="currentColor"
                    class="h-full w-full" style="transform:scale(1.3)">
                    <path
                        d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z" />
                </svg></span>
        </button>
    </div>

    <script>
        const areas = [{ id: 7, name: "Askari 14, Sector A/B", city: "Rawalpindi" }, { id: 8, name: "Askari 14, Sector D", city: "Rawalpindi" }, { id: 5, name: "Bahria Phase 8", city: "Rawalpindi" }, { id: 6, name: "DHA Phase 2", city: "Islamabad" }, { id: 2, name: "Sector F-7", city: "Islamabad" }, { id: 3, name: "Sector H-12", city: "Islamabad" }, { id: 4, name: "Sector H-13", city: "Islamabad" }];
        const storesData = [{ id: 24, name: "Hash Mart", slug: "hash-mart", same_day_delivery: true, delivery_charges: 200, min_order_value: 100, free_delivery_threshold: 500, areas: [5], store_hours: "All day", delivery_hours: "All day" }, { id: 22, name: "Royal Cash & Carry", slug: "royal-cash-and-carry", same_day_delivery: true, delivery_charges: 100, min_order_value: 100, free_delivery_threshold: 1000, areas: [2, 4], store_hours: "8:00 AM - 11:59 PM", delivery_hours: "4:00 PM - 11:00 PM" }];

        const catColors = ['#1a3a5c', '#C4881C', '#0d7c4a', '#6d28d9', '#dc2626', '#0369a1', '#9333ea', '#b45309'];
        const categories = [{ id: 1, name: "Fresh", parent_id: null }, { id: 9, name: "Snacks", parent_id: null }, { id: 28, name: "Beverages", parent_id: null }, { id: 42, name: "Tea & Coffee", parent_id: null }, { id: 50, name: "Grocery", parent_id: null }, { id: 2, name: "Fruits & Veg", parent_id: 1 }, { id: 6, name: "Meat", parent_id: 1 }, { id: 10, name: "Biscuits", parent_id: 9 }, { id: 17, name: "Chocolates", parent_id: 9 }, { id: 23, name: "Chips", parent_id: 9 }, { id: 29, name: "Soft Drinks", parent_id: 28 }, { id: 33, name: "Juices", parent_id: 28 }, { id: 43, name: "Tea", parent_id: 42 }, { id: 46, name: "Coffee", parent_id: 42 }, { id: 48, name: "Whiteners", parent_id: 42 }, { id: 51, name: "Pulses", parent_id: 50 }, { id: 53, name: "Noodles", parent_id: 50 }, { id: 57, name: "Spices", parent_id: 50 }, { id: 65, name: "Oil & Ghee", parent_id: 50 }, { id: 71, name: "Rice", parent_id: 50 }];

        const products = [
            { id: 101, name: "Nurpur Milk Full Cream 1000ml", weight: "1000 ml", price: 520, oldPrice: null, category_id: 2, image: "https://images.unsplash.com/photo-1563636619-e9143da7973b?w=400&h=400&fit=crop" },
            { id: 102, name: "NESCAFE Classic Coffee Jar 50g", weight: "50 g", price: 1049, oldPrice: null, category_id: 46, image: "https://images.unsplash.com/photo-1559056199-641a0ac8b55e?w=400&h=400&fit=crop" },
            { id: 103, name: "Kingston Kerosene 650ml Green", weight: "650 ml", price: 750, oldPrice: null, category_id: 28, image: "https://images.unsplash.com/photo-1625772299848-391b6a87d7b3?w=400&h=400&fit=crop" },
            { id: 104, name: "Guard Ultimate Nature's Longest Basmati Rice 5kg", weight: "5 kg", price: 570, oldPrice: null, category_id: 71, image: "https://images.unsplash.com/photo-1586201375761-83865001e31c?w=400&h=400&fit=crop" },
            { id: 105, name: "Butterfly Pads Breathable Maxi Thick XL 16's", weight: "16 pcs", price: 600, oldPrice: null, category_id: 50, image: "https://images.unsplash.com/photo-1583947215259-38e31be8751f?w=400&h=400&fit=crop" },
            { id: 106, name: "Dalda Cooking Oil 5L", weight: "5 L", price: 2200, oldPrice: 2500, category_id: 65, image: "https://images.unsplash.com/photo-1474979266404-7eaacbcd87c5?w=400&h=400&fit=crop" },
            { id: 107, name: "Tapal Danedar Tea 190g", weight: "190 g", price: 350, oldPrice: 400, category_id: 43, image: "https://images.unsplash.com/photo-1556679343-c7306c1976bc?w=400&h=400&fit=crop" },
            { id: 108, name: "Coca Cola Pet Bottle 1.5L", weight: "1.5 L", price: 180, oldPrice: 200, category_id: 29, image: "https://images.unsplash.com/photo-1629203851122-3726ecdf080e?w=400&h=400&fit=crop" },
            { id: 109, name: "Oreo Original Biscuits 133g", weight: "133 g", price: 120, oldPrice: null, category_id: 10, image: "https://images.unsplash.com/photo-1590080875515-8a3a8dc5735e?w=400&h=400&fit=crop" },
            { id: 110, name: "Dairy Milk Chocolate 38g", weight: "38 g", price: 100, oldPrice: null, category_id: 17, image: "https://images.unsplash.com/photo-1511381939415-e44015466834?w=400&h=400&fit=crop" },
            { id: 111, name: "Lays Classic Salted 70g", weight: "70 g", price: 80, oldPrice: null, category_id: 23, image: "https://images.unsplash.com/photo-1566478989037-eec170784d0b?w=400&h=400&fit=crop" },
            { id: 112, name: "Nestle Fruita Vitals Mango 1L", weight: "1 L", price: 250, oldPrice: null, category_id: 33, image: "https://images.unsplash.com/photo-1600271886742-f049cd451bba?w=400&h=400&fit=crop" },
            { id: 113, name: "Chana Dal 1kg", weight: "1 kg", price: 280, oldPrice: null, category_id: 51, image: "https://images.unsplash.com/photo-1585155770913-5f63baf6c935?w=400&h=400&fit=crop" },
            { id: 114, name: "Knorr Noodles Chatpata 66g", weight: "66 g", price: 40, oldPrice: null, category_id: 53, image: "https://images.unsplash.com/photo-1612929633738-8fe44f7ec841?w=400&h=400&fit=crop" },
            { id: 115, name: "National Red Chili Powder 200g", weight: "200 g", price: 170, oldPrice: null, category_id: 57, image: "https://images.unsplash.com/photo-1596040033229-a9821ebd058d?w=400&h=400&fit=crop" },
        ];

        let currentStore = null, currentArea = null, cart = {}, searchQuery = '';

        document.addEventListener('DOMContentLoaded', () => {
            lucide.createIcons();
            parseUrlParams();
            renderFeatured();
            renderProducts();
            updateCartUI();
        });

        function parseUrlParams() {
            const p = new URLSearchParams(window.location.search);
            const slug = p.get('store') || 'royal-cash-and-carry';
            const areaName = p.get('area') || 'Sector H-12';
            currentStore = storesData.find(s => s.slug === slug) || storesData[1];
            currentArea = areas.find(a => a.name === areaName) || areas[5];
            document.getElementById('selectedAreaDesktop').textContent = currentArea.name;
            document.getElementById('headerStoreName').textContent = currentStore.name;
            document.getElementById('welcomeStoreName').textContent = currentStore.name;
            document.getElementById('searchStoreName').textContent = currentStore.name;
            document.getElementById('searchInput').placeholder = `Search products in ${currentStore.name}...`;
            document.title = `LootMart - ${currentStore.name}`;
            document.getElementById('deliveryFeeInfo').textContent = `Rs. ${currentStore.delivery_charges}`;
            document.getElementById('freeDeliveryInfo').textContent = `Rs. ${currentStore.free_delivery_threshold}+`;
            document.getElementById('storeHours').textContent = currentStore.store_hours || 'All day';
            document.getElementById('deliveryHours').textContent = currentStore.delivery_hours || 'All day';
            if (!currentStore.same_day_delivery) document.getElementById('headerSameDay').classList.add('hidden');
        }

        function getCatColor(catId) {
            const parent = categories.find(c => c.id === catId);
            if (!parent) return catColors[0];
            const idx = categories.filter(c => c.parent_id === null).indexOf(parent);
            return catColors[idx % catColors.length];
        }
        function getCatName(catId) {
            const c = categories.find(x => x.id === catId);
            return c ? c.name : 'General';
        }
        function getCatColorForProduct(p) {
            const cat = categories.find(c => c.id === p.category_id);
            if (!cat) return catColors[0];
            const parentId = cat.parent_id || cat.id;
            const parentCats = categories.filter(c => c.parent_id === null);
            const idx = parentCats.findIndex(c => c.id === parentId);
            return catColors[idx >= 0 ? idx % catColors.length : 0];
        }

        function renderFeatured() {
            const track = document.getElementById('featuredTrack');
            const featured = products.slice(0, 8);
            track.innerHTML = featured.map(p => {
                const color = getCatColorForProduct(p);
                const qty = cart[p.id] || 0;
                return `<div class="carousel-card">
          <div class="product-card">
            <div class="img-wrap"><img src="${p.image}" alt="${p.name}" loading="lazy"/></div>
            <div class="info">
              <span class="cat-label" style="background:${color}15;color:${color}">${getCatName(p.category_id)}</span>
              <div class="pname">${p.name}</div>
              <div class="price-row"><div><span class="price">Rs. ${p.price.toLocaleString()}</span>${p.oldPrice ? `<span class="old-price">Rs. ${p.oldPrice.toLocaleString()}</span>` : ''}</div></div>
              ${qty === 0 ? `<button class="add-btn mt-2" onclick="addToCart(${p.id})"><i data-lucide="shopping-cart" class="w-4 h-4"></i> Add</button>` : `<div class="qty-control mt-2" style="width:100%;justify-content:center"><button class="qty-btn" onclick="decrementCart(${p.id})">−</button><span class="qty-val">${qty}</span><button class="qty-btn" onclick="addToCart(${p.id})">+</button></div>`}
            </div>
          </div>
        </div>`;
            }).join('');
            lucide.createIcons();
        }

        function scrollCarousel(dir) {
            const t = document.getElementById('featuredTrack');
            t.scrollBy({ left: dir * 220, behavior: 'smooth' });
        }

        function renderProducts() {
            let filtered = [...products];
            if (searchQuery) { const q = searchQuery.toLowerCase(); filtered = filtered.filter(p => p.name.toLowerCase().includes(q)); }
            const grid = document.getElementById('productsGrid');
            const empty = document.getElementById('emptyState');
            const title = document.getElementById('productSectionTitle');
            title.textContent = searchQuery ? `Results for "${searchQuery}"` : 'Popular Products';
            if (filtered.length === 0) { grid.innerHTML = ''; empty.classList.remove('hidden'); lucide.createIcons(); return; }
            empty.classList.add('hidden');
            grid.innerHTML = filtered.map(p => {
                const qty = cart[p.id] || 0;
                const color = getCatColorForProduct(p);
                const discount = p.oldPrice ? Math.round(((p.oldPrice - p.price) / p.oldPrice) * 100) : 0;
                return `<div class="product-card" id="product-${p.id}">
          <div class="img-wrap">
            ${discount > 0 ? `<div class="absolute top-2 left-2 z-10"><span class="text-xs font-semibold text-red-600 bg-red-50 px-1.5 py-0.5 rounded">-${discount}%</span></div>` : ''}
            <img src="${p.image}" alt="${p.name}" loading="lazy"/>
          </div>
          <div class="info">
            <span class="cat-label" style="background:${color}15;color:${color}">${getCatName(p.category_id)}</span>
            <div class="pname">${p.name}</div>
            <div class="pweight">${p.weight}</div>
            <div class="price-row"><div><span class="price">Rs. ${p.price.toLocaleString()}</span>${p.oldPrice ? `<span class="old-price">Rs. ${p.oldPrice.toLocaleString()}</span>` : ''}</div></div>
            ${qty === 0 ? `<button class="add-btn mt-2" onclick="addToCart(${p.id})"><i data-lucide="shopping-cart" class="w-4 h-4"></i> Add</button>` : `<div class="qty-control mt-2" style="width:100%;justify-content:center"><button class="qty-btn" onclick="decrementCart(${p.id})">−</button><span class="qty-val">${qty}</span><button class="qty-btn" onclick="addToCart(${p.id})">+</button></div>`}
          </div>
        </div>`;
            }).join('');
            lucide.createIcons();
        }

        let searchTimeout;
        function handleSearch(v) {
            if (typeof v === 'string' && v.length > 0) { document.getElementById('searchInput').value = v; }
            clearTimeout(searchTimeout);
            searchTimeout = setTimeout(() => { searchQuery = (document.getElementById('searchInput').value || '').trim(); renderProducts(); }, 200);
        }

        function addToCart(id) { cart[id] = (cart[id] || 0) + 1; renderProducts(); renderFeatured(); updateCartUI(); }
        function decrementCart(id) { if (cart[id] > 1) cart[id]--; else delete cart[id]; renderProducts(); renderFeatured(); updateCartUI(); }

        function updateCartUI() {
            const totalItems = Object.values(cart).reduce((a, b) => a + b, 0);
            const subtotal = Object.entries(cart).reduce((t, [id, qty]) => { const p = products.find(x => x.id === parseInt(id)); return t + (p ? p.price * qty : 0); }, 0);
            const delivery = totalItems > 0 ? (subtotal >= (currentStore?.free_delivery_threshold || 1000) ? 0 : (currentStore?.delivery_charges || 100)) : 0;
            const total = subtotal + delivery;
            const mb = document.getElementById('cartBadgeMobile');
            if (totalItems > 0) { mb.classList.remove('hidden'); mb.textContent = totalItems; } else { mb.classList.add('hidden'); }
            document.getElementById('cartItemCount').textContent = `(${totalItems} item${totalItems !== 1 ? 's' : ''})`;
            document.getElementById('cartSubtotal').textContent = `Rs. ${subtotal.toLocaleString()}`;
            document.getElementById('cartDelivery').textContent = delivery === 0 && totalItems > 0 ? 'FREE' : `Rs. ${delivery.toLocaleString()}`;
            document.getElementById('cartTotal').textContent = `Rs. ${total.toLocaleString()}`;
            const list = document.getElementById('cartItemsList');
            const emptyView = document.getElementById('emptyCartView');
            if (totalItems === 0) { list.innerHTML = ''; emptyView.classList.remove('hidden'); } else {
                emptyView.classList.add('hidden');
                list.innerHTML = Object.entries(cart).map(([id, qty]) => { const p = products.find(x => x.id === parseInt(id)); if (!p) return ''; return `<div class="flex items-center gap-3 py-3 border-b border-gray-100"><img src="${p.image}" alt="${p.name}" class="w-14 h-14 rounded-lg object-cover flex-shrink-0"/><div class="flex-1 min-w-0"><div class="text-sm font-medium text-gray-900 truncate">${p.name}</div><div class="text-xs text-gray-500">${p.weight}</div><div class="text-sm font-semibold mt-1">Rs. ${(p.price * qty).toLocaleString()}</div></div><div class="qty-control flex-shrink-0"><button class="qty-btn" onclick="decrementCart(${p.id})">−</button><span class="qty-val">${qty}</span><button class="qty-btn" onclick="addToCart(${p.id})">+</button></div></div>`; }).join('');
            }
            const mobileBar = document.getElementById('mobileCartBar');
            if (totalItems > 0) { mobileBar.classList.remove('hidden'); document.getElementById('mobileCartCount').textContent = `${totalItems} item${totalItems !== 1 ? 's' : ''}`; document.getElementById('mobileCartTotal').textContent = `Rs. ${total.toLocaleString()}`; } else { mobileBar.classList.add('hidden'); }
        }

        function toggleCart() { const w = document.getElementById('cartWrapper'); if (w.classList.contains('hidden')) { w.classList.remove('hidden'); updateCartUI(); } else { w.classList.add('hidden'); } }
        function showLoginModal() { document.getElementById('loginModal').classList.remove('hidden'); }
        function closeLoginModal() { document.getElementById('loginModal').classList.add('hidden'); }
        function setGridView(v) { }
    </script>
</body>

</html>